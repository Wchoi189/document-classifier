# ğŸ“– ë¬¸ì„œ ë¶„ë¥˜ ëª¨ë¸ ì¢…í•© ì‚¬ìš©ë²• ê°€ì´ë“œ

## ğŸ—ï¸ í”„ë¡œì íŠ¸ ê°œìš”

**í˜„ì¬ ìƒíƒœ**: 93% í…ŒìŠ¤íŠ¸ ì •í™•ë„ (99% í›ˆë ¨) - 6% ë„ë©”ì¸ ê°­
**í´ë˜ìŠ¤**: 17ê°œ ë¬¸ì„œ ìœ í˜•, 2.2:1 í´ë˜ìŠ¤ ë¶ˆê· í˜•
**í•µì‹¬ ë°œê²¬**: í›ˆë ¨/í…ŒìŠ¤íŠ¸ ë°ì´í„° ê°„ 554% íšŒì „ ê°ë„ ì°¨ì´
**í”„ë ˆì„ì›Œí¬**: PyTorch + Hydra + WandB

---

## ğŸ“ ì£¼ìš” íŒŒì¼ êµ¬ì¡°

```
ğŸ“¦ í”„ë¡œì íŠ¸ ë£¨íŠ¸
â”œâ”€â”€ ğŸ“ configs/                    # ì„¤ì • íŒŒì¼
â”‚   â”œâ”€â”€ config.yaml                # ë©”ì¸ ì„¤ì •
â”‚   â””â”€â”€ ğŸ“ experiment/             # ì‹¤í—˜ë³„ ì„¤ì •
â”œâ”€â”€ ğŸ“ scripts/                    # ì‹¤í–‰ ìŠ¤í¬ë¦½íŠ¸
â”‚   â”œâ”€â”€ train.py                   # í›ˆë ¨ ìŠ¤í¬ë¦½íŠ¸
â”‚   â”œâ”€â”€ predict.py                 # ì˜ˆì¸¡ ìŠ¤í¬ë¦½íŠ¸
â”‚   â”œâ”€â”€ generate_datasets.py       # ë°ì´í„°ì…‹ ìƒì„±
â”‚   â””â”€â”€ analyze_data.py            # ë°ì´í„° ë¶„ì„
â”œâ”€â”€ ğŸ“ src/
â”‚   â”œâ”€â”€ ğŸ“ analysis/               # ë¶„ì„ ë„êµ¬
â”‚   â”œâ”€â”€ ğŸ“ data/                   # ë°ì´í„° ì²˜ë¦¬
â”‚   â”œâ”€â”€ ğŸ“ training/               # í›ˆë ¨ ë„êµ¬
â”‚   â”œâ”€â”€ ğŸ“ utils/                  # ìœ í‹¸ë¦¬í‹°
â”‚   â””â”€â”€ ğŸ“ inference/              # ì¶”ë¡  ë„êµ¬
â””â”€â”€ ğŸ“ outputs/                    # ê²°ê³¼ ì €ì¥
    â”œâ”€â”€ ğŸ“ models/                 # í›ˆë ¨ëœ ëª¨ë¸
    â”œâ”€â”€ ğŸ“ predictions/            # ì˜ˆì¸¡ ê²°ê³¼
    â””â”€â”€ ğŸ“ analysis/               # ë¶„ì„ ê²°ê³¼
```

---

## ğŸš€ ê¸°ë³¸ ì‚¬ìš©ë²•

### 1. ëª¨ë¸ í›ˆë ¨

#### ë¹ ë¥¸ ë””ë²„ê·¸ í›ˆë ¨ (3 ì—í¬í¬)
```bash
python scripts/train.py experiment=quick_debug --config-path=configs/experiment/quick_test.yaml
```

#### í”„ë¡œë•ì…˜ í›ˆë ¨
```bash
python scripts/train.py experiment=production_robust
```

#### ì»¤ìŠ¤í…€ ì„¤ì •ìœ¼ë¡œ í›ˆë ¨
```bash
python scripts/train.py model.name=resnet50 train.epochs=20 train.batch_size=32
```

```bash
# Config location ì„¤ì •ì€ `scripts/train.py`ì—ì„œ ë³€ê²½ ê°€ëŠ¥
@hydra.main(version_base="1.2", config_path="../configs")

```
```bash
# ëª…ì‹œì ìœ¼ë¡œ ì„¤ì • íŒŒì¼ ìœ„ì¹˜ì™€ ì´ë¦„ ì •ì˜
python scripts/train.py --config-path=/home/wb2x/document-classifier/configs --config-name=quick_debug
```

```bash
# ë˜ëŠ” ìƒëŒ€ì ì¸ ê²½ë¡œ ì‚¬ìš©
python scripts/train.py --config-path=../configs --config-name=quick_debug
```




### 2. ì˜ˆì¸¡ ìƒì„±

#### ìµœì‹  ëª¨ë¸ë¡œ ì˜ˆì¸¡
```bash
python scripts/predict.py run --input_path data/raw/test --use-last
```

#### íŠ¹ì • ì²´í¬í¬ì¸íŠ¸ë¡œ ì˜ˆì¸¡
```bash
python scripts/predict.py run --input_path data/raw/test --checkpoint outputs/models/best_model.pth
```

#### WandB ë¡œê¹…ê³¼ í•¨ê»˜ ì˜ˆì¸¡
```bash
python scripts/predict.py predict_with_wandb outputs/models/best_model.pth data/raw/test --wandb-project document-classifier
```

---

## ğŸ” ë¶„ì„ ë„êµ¬ ì‚¬ìš©ë²•

### 1. Corruption ë¶„ì„ê¸° (ë°ì´í„° ë„ë©”ì¸ ê°­ ë¶„ì„)
```bash
# ì¢…í•© corruption ë¶„ì„ ì‹¤í–‰
python -m src.analysis.corruption_analyzer run_comprehensive_analysis

# ìµœëŒ€ ìƒ˜í”Œ ìˆ˜ ì§€ì •
python -m src.analysis.corruption_analyzer run_comprehensive_analysis --max_samples 500
```

**ê²°ê³¼ ìœ„ì¹˜**: `outputs/corruption_analysis/`
- í›ˆë ¨/í…ŒìŠ¤íŠ¸ ë°ì´í„° ê°„ ì°¨ì´ì  ë¶„ì„
- íšŒì „, ë°ê¸°, ë¸”ëŸ¬, ë…¸ì´ì¦ˆ ì°¨ì´ ì‹œê°í™”
- **í•µì‹¬ ë°œê²¬**: 554% íšŒì „ ê°ë„ ì°¨ì´

### 2. í´ë˜ìŠ¤ ì„±ëŠ¥ ë¶„ì„ê¸°
```bash
# ìµœì‹  ì˜ˆì¸¡ ê²°ê³¼ë¡œ ë¶„ì„
python -m src.analysis.class_performance_analyzer run_comprehensive_analysis \
    --predictions_csv outputs/predictions/predictions_HHMM.csv

# íŠ¹ì • ì˜ˆì¸¡ íŒŒì¼ë¡œ ë¶„ì„
python -m src.analysis.class_performance_analyzer run_comprehensive_analysis \
    --predictions_csv /path/to/your/predictions.csv
```

**ê²°ê³¼ ìœ„ì¹˜**: `outputs/class_performance_analysis/`
- í´ë˜ìŠ¤ë³„ ì •í™•ë„, F1 ì ìˆ˜ ë¶„ì„
- ì·¨ì•½í•œ í´ë˜ìŠ¤ ì‹ë³„
- Corruptionê³¼ ì„±ëŠ¥ ì—°ê´€ì„± ë¶„ì„

### 3. ì˜¤ë¶„ë¥˜ ë¶„ì„ê¸°
```bash
# ì¢…í•© ì˜¤ë¶„ë¥˜ ë¶„ì„
python -m src.analysis.wrong_predictions_explorer analyze_predictions \
    --predictions_csv outputs/predictions/predictions_HHMM.csv

# HTML ë³´ê³ ì„œ ìƒì„±
python -m src.analysis.wrong_predictions_explorer generate_html_report \
    --predictions_csv outputs/predictions/predictions_HHMM.csv
```

**ê²°ê³¼ ìœ„ì¹˜**: `outputs/wrong_predictions_analysis/`
- ì˜¤ë¶„ë¥˜ íŒ¨í„´ ì‹œê°í™”
- í´ë˜ìŠ¤ë³„ í˜¼ë™ ë§¤íŠ¸ë¦­ìŠ¤
- ìƒì„¸ HTML ë³´ê³ ì„œ

### 4. ì‹œê°ì  ê²€ì¦ ë„êµ¬
```bash
# ì¦ê°• ì „ëµ ë¹„êµ
python -m src.utils.visual_verification compare_augmentation_strategies

# í›ˆë ¨/í…ŒìŠ¤íŠ¸ ì¡°ê±´ ë¹„êµ
python -m src.utils.visual_verification compare_train_test_conditions

# íŠ¹ì • ìƒ˜í”Œ ë¶„ì„
python -m src.utils.visual_verification analyze_samples --max_samples 50
```

**ê²°ê³¼ ìœ„ì¹˜**: `outputs/visual_verification/`
- ì¦ê°•ëœ í›ˆë ¨ ì´ë¯¸ì§€ vs ì‹¤ì œ í…ŒìŠ¤íŠ¸ ì¡°ê±´
- ì¦ê°• ê°•ë„ ì‹œê°ì  ê²€ì¦

### 5. í…ŒìŠ¤íŠ¸ ì´ë¯¸ì§€ ë¶„ì„ê¸°
```bash
# ì¢…í•© í…ŒìŠ¤íŠ¸ ë¶„ì„
python -m src.utils.test_image_analyzer run_comprehensive_analysis

# ëŒ€í‘œ ìƒ˜í”Œ ì„ íƒ
python -m src.utils.test_image_analyzer select_representative_samples --num_samples 100
```

**ê²°ê³¼ ìœ„ì¹˜**: `outputs/test_image_analysis/`
- í…ŒìŠ¤íŠ¸ ë°ì´í„° íŠ¹ì„± ë¶„ì„
- ëŒ€í‘œ ìƒ˜í”Œ ê°¤ëŸ¬ë¦¬ ìƒì„±

---

## ğŸ“Š ë°ì´í„°ì…‹ ìƒì„± ë„êµ¬

### 1. ì ì§„ì  ì¦ê°• ë°ì´í„°ì…‹ ìƒì„±
```bash
# ê¸°ë³¸ ì ì§„ì  ë°ì´í„°ì…‹ (10ë°° ì¦ê°•)
python scripts/generate_datasets.py generate_progressive --multiplier=10

# ì»¤ìŠ¤í…€ ë°°ìˆ˜ë¡œ ìƒì„±
python scripts/generate_datasets.py generate_progressive --multiplier=15
```

**ìƒì„±ë˜ëŠ” ë°ì´í„°ì…‹**:
- `phase1_mild_20deg`: Â±20Â° íšŒì „ (ì ì‘ ë‹¨ê³„)
- `phase2_variety_60deg`: Â±60Â° + ì´ì‚° 90Â° (ë‹¤ì–‘ì„± ë‹¨ê³„)
- `phase3_full_90deg`: Â±90Â° + í”Œë¦½ (ì™„ì „ ê²¬ê³ ì„±)

### 2. K-Fold êµì°¨ê²€ì¦ ë°ì´í„°ì…‹ ìƒì„±
```bash
# 5-fold ë°ì´í„°ì…‹ ìƒì„±
python scripts/generate_datasets.py generate_kfold --k=5 --multiplier=5 --strategy=phase1_mild

# ë‹¤ë¥¸ ì „ëµìœ¼ë¡œ ìƒì„±
python scripts/generate_datasets.py generate_kfold --k=5 --multiplier=10 --strategy=phase2_variety
```

**ì „ëµ ì˜µì…˜**:
- `phase1_mild`: ê°€ë²¼ìš´ ì¦ê°• (Â±20Â°)
- `phase2_variety`: ì¤‘ê°„ ì¦ê°• (Â±60Â°)
- `phase3_full`: ì™„ì „ ì¦ê°• (Â±90Â°)

### 3. ë‹¨ì¼ ë°ì´í„°ì…‹ ìƒì„±
```bash
# ë³¼ë¥¨ ì¤‘ì‹¬ ì „ëµ
python scripts/generate_datasets.py generate_single \
    --dataset_name=test_experiment \
    --strategy=volume_focused \
    --multiplier=5

# í…ŒìŠ¤íŠ¸ ì¡°ê±´ ì¤‘ì‹¬ ì „ëµ
python scripts/generate_datasets.py generate_single \
    --dataset_name=test_focused \
    --strategy=test_focused \
    --multiplier=8
```

---

## ğŸ§ª ê³ ê¸‰ í›ˆë ¨ ë„êµ¬

### 1. ë³´ìˆ˜ì  ì¦ê°• í…ŒìŠ¤í„°
```bash
# ê¸°ë³¸ ë³´ìˆ˜ì  í…ŒìŠ¤íŠ¸ (3 ì—í¬í¬)
python -m src.training.conservative_augmentation_tester run_conservative_augmentation_test \
    --baseline_checkpoint outputs/models/best_model.pth

# ë” ê¸´ ê²€ì¦ (5 ì—í¬í¬)
python -m src.training.conservative_augmentation_tester run_conservative_augmentation_test \
    --baseline_checkpoint outputs/models/best_model.pth \
    --quick_epochs 5
```

**ê¸°ëŠ¥**:
- ê¸°ì¡´ ì„±ëŠ¥ ìœ ì§€í•˜ë©° ì•ˆì „í•œ ì¦ê°• í…ŒìŠ¤íŠ¸
- 5ë‹¨ê³„ ì ì§„ì  ì¦ê°• ê²€ì¦ (Â±0Â° â†’ Â±10Â° â†’ Â±15Â° â†’ Â±25Â° â†’ Â±45Â°)
- ê° ë‹¨ê³„ë³„ ì„±ëŠ¥ ë¹„êµ ë° ê¶Œì¥ì‚¬í•­ ìƒì„±

**ê²°ê³¼ ìœ„ì¹˜**: `outputs/conservative_augmentation_test/`

### 2. ì ì§„ì  í›ˆë ¨ íŒŒì´í”„ë¼ì¸
```bash
# Phase 1 í›ˆë ¨ (K-foldë¡œ)
python scripts/train.py experiment=phase1_kfold_training

# Phase 2 í›ˆë ¨ (ì²´í¬í¬ì¸íŠ¸ ë¡œë”©)
python scripts/train.py experiment=phase2_progressive load_checkpoint=outputs/models/phase1_best.pth

# Phase 3 ìµœì¢… í›ˆë ¨
python scripts/train.py experiment=phase3_final load_checkpoint=outputs/models/phase2_best.pth
```

---

## ğŸ¯ ì¢…í•© ë°ì´í„° ë¶„ì„ íŒŒì´í”„ë¼ì¸

### ì „ì²´ ë¶„ì„ íŒŒì´í”„ë¼ì¸ ì‹¤í–‰
```bash
# ëª¨ë“  ë¶„ì„ ë„êµ¬ë¥¼ ìˆœì°¨ì ìœ¼ë¡œ ì‹¤í–‰
python scripts/analyze_data.py run_comprehensive_analysis

# íŠ¹ì • ì˜ˆì¸¡ íŒŒì¼ë¡œ ë¶„ì„
python scripts/analyze_data.py run_comprehensive_analysis \
    --predictions_csv outputs/predictions/predictions_1234.csv
```

**ì‹¤í–‰ë˜ëŠ” ë¶„ì„**:
1. í…ŒìŠ¤íŠ¸ ì´ë¯¸ì§€ ë¶„ì„
2. ì‹œê°ì  ê²€ì¦
3. ì˜¤ë¶„ë¥˜ ë¶„ì„ (ì˜ˆì¸¡ íŒŒì¼ ìˆëŠ” ê²½ìš°)
4. ì¢…í•© ë³´ê³ ì„œ ìƒì„±

**ê²°ê³¼**: `outputs/comprehensive_data_analysis/data_analysis_summary.md`

---

## ğŸ“ˆ WandB ëª¨ë‹ˆí„°ë§

### 1. WandB ì„¤ì •
```bash
# í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
export WANDB_MODE=online  # ë˜ëŠ” offline, disabled
export WANDB_PROJECT=document-classifier
```

### 2. í›ˆë ¨ ì¤‘ WandB ë¡œê¹… í™•ì¸ ì‚¬í•­
- í›ˆë ¨/ê²€ì¦ ì†ì‹¤ ë° ì •í™•ë„
- ìƒ˜í”Œ ì˜ˆì¸¡ ì´ë¯¸ì§€
- í˜¼ë™ ë§¤íŠ¸ë¦­ìŠ¤
- ëª¨ë¸ ê°€ì¤‘ì¹˜ íˆìŠ¤í† ê·¸ë¨
- í•˜ì´í¼íŒŒë¼ë¯¸í„° ì¶”ì 

### 3. ì˜ˆì¸¡ ê²°ê³¼ WandB ì—…ë¡œë“œ
```bash
python -m src.inference.wandb_predict predict_with_wandb_logging \
    outputs/models/best_model.pth data/raw/test \
    --wandb_project document-classifier
```

---

## ğŸ”§ ì„¤ì • íŒŒì¼ ì»¤ìŠ¤í„°ë§ˆì´ì§•

### ë©”ì¸ ì„¤ì • íŒŒì¼ (`configs/config.yaml`)
```yaml
# ëª¨ë¸ ì„¤ì •
model:
  name: resnet50
  pretrained: true
  num_classes: 17

# í›ˆë ¨ ì„¤ì •
train:
  epochs: 50
  batch_size: 32
  learning_rate: 0.001

# ë°ì´í„° ì„¤ì •
data:
  root_dir: data/raw
  image_size: 224
  batch_size: 32

# ì¦ê°• ì„¤ì •
augmentation:
  enabled: true
  strategy: robust
  intensity: 0.7

# WandB ì„¤ì •
wandb:
  enabled: true
  project: document-classifier
  log_images: true
```

### ì‹¤í—˜ë³„ ì„¤ì • (`configs/experiment/`)
- `quick_debug.yaml`: ë¹ ë¥¸ ë””ë²„ê¹… (3 ì—í¬í¬)
- `production_robust.yaml`: í”„ë¡œë•ì…˜ í›ˆë ¨ (50 ì—í¬í¬)
- `phase1_kfold_training.yaml`: Phase 1 K-fold í›ˆë ¨
- `phase2_progressive.yaml`: Phase 2 ì ì§„ì  í›ˆë ¨

---

## ğŸ“Š ê²°ê³¼ íŒŒì¼ ìœ„ì¹˜ ë° í•´ì„

### ëª¨ë¸ íŒŒì¼
- `outputs/models/best_model.pth`: ìµœê³  ì„±ëŠ¥ ëª¨ë¸
- `outputs/models/last_model.pth`: ë§ˆì§€ë§‰ ì—í¬í¬ ëª¨ë¸
- `outputs/models/phase1_best.pth`: Phase 1 ìµœê³  ëª¨ë¸

### ì˜ˆì¸¡ ê²°ê³¼
- `outputs/predictions/predictions_HHMM.csv`: ì˜ˆì¸¡ ê²°ê³¼ (ì‹œê°„ë³„)
  - ì»¬ëŸ¼: `filename`, `predicted_class`, `confidence`, `predicted_target`

### ë¶„ì„ ê²°ê³¼
- `outputs/corruption_analysis/`: Corruption ë¶„ì„ ê²°ê³¼
- `outputs/class_performance_analysis/`: í´ë˜ìŠ¤ë³„ ì„±ëŠ¥ ë¶„ì„
- `outputs/wrong_predictions_analysis/`: ì˜¤ë¶„ë¥˜ ë¶„ì„
- `outputs/visual_verification/`: ì‹œê°ì  ê²€ì¦ ê²°ê³¼

### ìƒì„±ëœ ë°ì´í„°ì…‹
- `data/augmented_datasets/`: ì¦ê°•ëœ í›ˆë ¨ ë°ì´í„°ì…‹
- `data/kfold_datasets/`: K-fold êµì°¨ê²€ì¦ ë°ì´í„°ì…‹

---

## ğŸš¨ ë¬¸ì œ í•´ê²° ê°€ì´ë“œ

### ì¼ë°˜ì ì¸ ì˜¤ë¥˜ì™€ í•´ê²°ë°©ë²•

#### 1. ë©”ëª¨ë¦¬ ë¶€ì¡± ì˜¤ë¥˜
```bash
# ë°°ì¹˜ í¬ê¸° ì¤„ì´ê¸°
python scripts/train.py train.batch_size=16

# ë°ì´í„° ë¡œë” ì›Œì»¤ ìˆ˜ ì¤„ì´ê¸°
python scripts/train.py data.num_workers=2
```

#### 2. CUDA ì˜¤ë¥˜
```bash
# CPUë¡œ ê°•ì œ ì‹¤í–‰
python scripts/train.py device=cpu

# GPU ë©”ëª¨ë¦¬ ì •ë¦¬
python -c "import torch; torch.cuda.empty_cache()"
```

#### 3. ì„¤ì • íŒŒì¼ ì˜¤ë¥˜
```bash
# ì„¤ì • êµ¬ì¡° í™•ì¸
python -c "from src.utils.config_utils import load_config; print(load_config('configs/config.yaml'))"

# ê¸°ë³¸ ì„¤ì •ìœ¼ë¡œ ì´ˆê¸°í™”
cp configs/config.yaml.backup configs/config.yaml
```

#### 4. WandB ì—°ê²° ë¬¸ì œ
```bash
# ì˜¤í”„ë¼ì¸ ëª¨ë“œë¡œ ì „í™˜
export WANDB_MODE=offline

# WandB ì¬ë¡œê·¸ì¸
wandb login
```

---

## ğŸ“ ëª¨ë²” ì‚¬ë¡€

### 1. ì‹¤í—˜ ì¶”ì 
- ê° ì‹¤í—˜ë§ˆë‹¤ ëª…í™•í•œ ì´ë¦„ê³¼ ì„¤ëª… ì‚¬ìš©
- WandB íƒœê·¸ë¡œ ì‹¤í—˜ ê·¸ë£¹í™”
- ì¤‘ìš”í•œ ì„¤ì • ë³€ê²½ì‚¬í•­ ê¸°ë¡

### 2. ì„±ëŠ¥ ê°œì„  ì›Œí¬í”Œë¡œìš°
1. **ê¸°ì¤€ì  ì„¤ì •**: í˜„ì¬ 79% ì„±ëŠ¥ í™•ì¸
2. **ë¬¸ì œ ë¶„ì„**: Corruption ë¶„ì„ìœ¼ë¡œ ì›ì¸ íŒŒì•…
3. **ì ì§„ì  ê°œì„ **: ë³´ìˆ˜ì  ì¦ê°• í…ŒìŠ¤í„°ë¡œ ì•ˆì „í•œ ê°œì„ 
4. **ë³¸ê²© í›ˆë ¨**: ê²€ì¦ëœ ì„¤ì •ìœ¼ë¡œ í’€ í›ˆë ¨
5. **ì„±ëŠ¥ ê²€ì¦**: ë‹¤ì–‘í•œ ë¶„ì„ ë„êµ¬ë¡œ ê²€ì¦

### 3. ë°ì´í„° ê´€ë¦¬
- ì¦ê°• ë°ì´í„°ì…‹ì€ ìš©ëŸ‰ì´ í¬ë¯€ë¡œ í•„ìš”ì‹œì—ë§Œ ìƒì„±
- K-fold ê²€ì¦ìœ¼ë¡œ ê³¼ì í•© ë°©ì§€
- ëŒ€í‘œ ìƒ˜í”Œì„ í†µí•œ ì§€ì†ì  ëª¨ë‹ˆí„°ë§

---

## ğŸ¯ ë‹¤ìŒ ë‹¨ê³„ ê¶Œì¥ì‚¬í•­

### ì¦‰ì‹œ ì‹¤í–‰ ê°€ëŠ¥í•œ ê°œì„ 
1. **í´ë˜ìŠ¤ ì·¨ì•½ì  ë¶„ì„** ì‹¤í–‰:
```bash
python -m src.analysis.class_performance_analyzer run_comprehensive_analysis \
    --predictions_csv outputs/predictions/predictions_latest.csv
```

2. **ë³´ìˆ˜ì  ì¦ê°• í…ŒìŠ¤íŠ¸** ì‹¤í–‰:
```bash
python -m src.training.conservative_augmentation_tester run_conservative_augmentation_test \
    --baseline_checkpoint outputs/models/best_model.pth
```

3. **ì ì§„ì  ë°ì´í„°ì…‹ ìƒì„±**:
```bash
python scripts/generate_datasets.py generate_progressive --multiplier=10
```

